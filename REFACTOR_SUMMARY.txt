REMOVED REDUNDANT:
------------------
✗ services/openrouter.py
✗ memory/conversation_memory.py
✗ models/conversation.py
✗ models/user.py
✗ db/mongo.py
✗ memory/session_memory.py (merged into repositories)
✗ Old agent files (recommendation_agent.py, inventory_agent.py, payment_agent.py, fulfillment_agent.py)
✗ Old orchestrator files (decision_engine.py, context_builder.py)


REFACTORED:
-----------
→ main.py: Clean routing only, updated imports
→ config.py: Removed duplicate database_name field
→ llm_service.py: Async httpx (replaced sync requests)
→ All agents: Repository pattern (no direct DB access)
→ session_repository.py: Bounded messages (MAX 5 with $slice)
→ orchestrator/router.py: Calls get_cart() for payment
→ utils/parsers.py: Extracted parsing logic


FIXED LOGIC:
------------
✓ LLM service: sync → async
✓ Messages: unbounded → MAX 5
✓ Payment: hardcoded [] → get_cart()
✓ Parsing: inline → utils
✓ DB access: agents → repositories
✓ Imports: standardized


FINAL STRUCTURE:
----------------
backend/app/
├── main.py
├── config.py
├── core/database.py
├── models/schemas.py
├── repositories/ (4 files)
├── services/llm_service.py
├── agents/ (4 files)
├── orchestrator/ (3 files)
└── utils/parsers.py

17 FILES TOTAL (was 30)
43% REDUCTION
